<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>중첩함수</title>
</head>
<body>
  <button>버튼</button>
  <script>
    
    function outer(){
      var x = 1;
      //중첩 함수
      function inner(){
        var y = 2;
        //외부 함수의 변수를 참조할 수 있다.
        console.log(x + y); //3
      }
      inner();
    }
    outer();

    //콜백 함수
    //함수를 매개변수를 통해 다른 함수의 내부로 전달되는 함수를 콜백 함수라고 한다.

    //n만큼 어떤일을 반복한다.
    function repeat(n) {
      //i를 출력한다.
      for(var i = 0; i < n; i++) console.log(i)
    }

    repeat(5); //0 1 2 3 4

    //n만큼 어떤일을 반복한다.
    function repeat2(n){
      for(var i = 0; i < n; i++){
        // i가 홀수일 때만 출력한다.
        if(i%2) console.log(i);
      }
    }
    repeat2(5); // 1 3


    //외부에서 전달받은 f를 n만큼 반복 호출한다.
    function repeat3(n,f){
      for(var i = 0; i < n; i++){
        f(i); //i를 전달하면서 f를 호출
      }
    }

    //logAll함수는 단 한번만 생성된다.
    var logAll = function(i){
      console.log(i)
    }

    //반복 호출할 함수(콜백함수)를 인수로 전달
    repeat3(5, logAll); //0 1 2 3 4
    //repeat3함수는 고차함수가 된다.

    var logOdds = function(i){//홀수값만 출력하는 함수
      if(i%2) console.log(i)
    }
  repeat3(5, logOdds);// 1 3

  //콜백 함수를 사용한 비동기 처리
  setTimeout(f, 1000)

  function f(){
    console.log('1초 경과')
  }

  document.querySelector('button').addEventListener('click',() => {
    console.log('button clicked')
  })
  </script>
</body>
</html>